# SwitchingAPI Analysis Context

## Component Overview
Java-based payment gateway library for Massmart retail POS systems providing unified access to EFT (Postilion) and VAS (Electrum/Mercurius) payment networks.

**Version**: 0.5.2
**Platform**: Java 7+ (Maven)
**Deployment**: Embedded JAR library
**Codebase**: C:\_development\Massmart\SwitchingAPI

## Key Architecture

**Provider Pattern**:
- Configuration-driven: `core.type` property selects provider
- ESP (Pure EFT), ELECTRUM (VAS + EFT), MERCURIUS (VAS via ESP), MAKRO_ELECTRUM (Composite)

**Chain-Specific Logic**:
- MDD store translation (1987 â†’ G987)
- Makro datetime validation
- BlackHawk gift card barcode parsing

**Resilience**:
- H2 database Store-and-Forward
- Scheduled retry every 10 seconds, batch 50 records
- Reconciliation integration with Causal Nexus Recon Service

## Code Locations

- **ISwitchingApi.java** (1-181): Main interface with 18 transaction methods
- **SwitchingApiShell.java** (1-983): Implementation with pre/post processing
- **eSocketProvider.java**: Pure EFT via Postilion eSocket.POS
- **ElectrumProvider.java**: VAS via Electrum JSON
- **MercuriusProvider.java**: VAS via Mercurius JSON
- **ReconSafProcessor.java** (32-36): SAF scheduler, 10-second fixed rate

## Strategic Value

Demonstrates operational maturity patterns:
- Multi-provider abstraction
- Chain-specific business rules
- Database-backed SAF with retry
- Reconciliation integration
