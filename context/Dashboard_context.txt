# Dashboard (NexusV4) Analysis Context

## Component Overview
Operational management portal built on ABP Framework (ASP.NET Core + Angular) providing transaction monitoring, merchant/supplier configuration, and system administration.

**Version**: NexusV4 Dashboard
**Platform**: ASP.NET Core 9.0 + Angular
**Deployment**: Web application (IIS or Kestrel)
**Codebase**: C:\_development\NexusV4\Dashboard

## Key Architecture

**ABP Framework** (Layered):
- **Domain Layer**: Entities (Transact, Merchant, Product, Aggregator, etc.)
- **Application Layer**: Services (TransactService, MerchantService, etc.)
- **Infrastructure Layer**: EF Core + Repository Pattern
- **Presentation Layer**: Angular SPA with auto-generated TypeScript proxies

**Multi-Tenancy**:
- Aggregator-based soft multi-tenancy
- Users have `AggregatorId` in ABP extra properties
- Service layer enforces aggregator filtering for non-admin users
- 15+ entities with AggregatorId support

**Authorization**:
- Permission-based: `OmniHubPermissions` static class
- Hierarchical: `Configuration.Merchants.Read/Create/Update/Delete`
- User hierarchy: Users can only manage descendants they created

## Code Locations

- **Dashboard/aspnet-core/NexusV4Dashboard.Application/Services/TransactService.cs**: Transaction queries
- **Dashboard/aspnet-core/NexusV4Dashboard.Application/Services/MerchantService.cs**: Merchant management
- **Dashboard/aspnet-core/NexusV4Dashboard.Application/Services/AggregatorService.cs**: Aggregator management
- **Dashboard/aspnet-core/NexusV4Dashboard.Application/Services/Base/NexusReplicationBase.cs**: Replication base class
- **Dashboard/aspnet-core/NexusV4Dashboard.Application/Services/Base/NexusUserContext.cs**: User aggregator helper
- **Dashboard/aspnet-core/NexusV4Dashboard.Application/Services/FuelRebate/ConfigValidationService.cs**: Fuel rebate simulation

## Services Inventory

**Transaction**: TransactService, ArchiveTransactService, MessageService, ArchiveMessageService
**Merchant**: MerchantService, MerchantProduct, MerchantSupplier, MerchantContact, MerchantAuditLog
**Configuration**: AggregatorService, ProductService, SupplierProductService, SupplierStatusService
**Operational**: DashboardService, WidgetService, FeedService, SessionService
**Identity**: CustomIdentityUserAppService, UserApiTokenService
**FuelRebate**: ConfigValidationService, StakeRuleService, RegionService, AssociationService, WalletInfoService, StakeHolderService

## Strategic Value

Demonstrates operational management patterns:
- ABP Framework layered architecture
- Aggregator-based multi-tenancy
- Repository Pattern + Unit of Work
- Service base class pattern
- Archive pattern for long-term retention
- Hierarchical user management
- Permission-based authorization
